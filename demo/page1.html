<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Demo</title>
<script src="../src/message.js"></script>

<link rel="stylesheet" href="http://view.gitlab.pro/common-ui/css-layout/raw/master/demo/css/base.css">
<link rel="stylesheet" href="http://view.gitlab.pro/common-ui/css-layout/raw/master/demo/css/layout.css">
<link rel="stylesheet" href="http://view.gitlab.pro/common-ui/ui/raw/master/src/ui.css">
<link rel="stylesheet" href="css/demo.css">
</head>
<body>

<div class="mod mod-out">
    <div class="mod_hd s-phm">page.mod11.test</div>
    <div class="mod_bd s-pam">
        <form id="mod11" action="/">
            <div class="btn l-fr s-pls">
                <button type="submit" class="ui-btn" hidefocus="true">send</button>
            </div>
            <div class="l-ff input">
                <b><input value="page.mod11.test" /></b>
            </div>
        </form>
        <pre class="result s-mtm s-pam">
            <span>wait...</span>
        </pre>
    </div>
</div>

</body>
<script>
var message = typeof require === "function"
? require('../src/message.js')
: Hao123.message;

message
    .on("page.mod10.test", function(data) {
        document.getElementById("mod11").parentNode.getElementsByTagName("pre")[0].innerHTML = data;
    })
    .on("page.mod12.test", function(data) {
        document.getElementById("mod11").parentNode.getElementsByTagName("pre")[0].innerHTML = data;
    });

message.send("page.mod11.opened", "1");

document.getElementById("mod11").onsubmit = function() {
    message.send("page.mod11.test", this.getElementsByTagName("input")[0].value);
    return false;
}

// send heartBeat
// setInterval(function() {
//     message.send("iframe.mod9.alive", "1", window.opener);
// }, 100)

</script>
</html>
