<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Demo</title>
<script src="../src/message.js"></script>

<link rel="stylesheet" href="http://gitlab.baidu.com/global-hao123/css-layout/raw/master/demo/css/base.css">
<link rel="stylesheet" href="http://gitlab.baidu.com/global-hao123/css-layout/raw/master/demo/css/layout.css">
<link rel="stylesheet" href="http://gitlab.baidu.com/global-hao123/ui/raw/master/dist/ui.css">
<link rel="stylesheet" href="css/demo.css">
</head>
<body>

<div class="mod mod-out">
    <div class="mod_hd s-phm">opener.mod9.test</div>
    <div class="mod_bd s-pam">
        <form id="mod9" action="/">
            <div class="btn l-fr s-pls">
                <button type="submit" class="ui-btn" hidefocus="true">send</button>
            </div>
            <div class="l-ff input">
                <b><input value="opener.mod9.test" /></b>
            </div>
        </form>
        <pre class="result s-mtm s-pam">
            <span>wait...</span>
        </pre>
    </div>
</div>

</body>
<script>
var message = typeof require === "function"
? require('../src/message.js')
: Hao123.message;


message.send("opener.mod9.opened", "1", window.opener);

message.on("opener.mod8.test", function(data) {
    document.getElementById("mod9").parentNode.getElementsByTagName("pre")[0].innerHTML = data;
})

document.getElementById("mod9").onsubmit = function() {
    message.send("opener.mod9.test", this.getElementsByTagName("input")[0].value, window.opener);
    return false;
}

// send heartBeat
// setInterval(function() {
//     message.send("opener.mod9.alive", "1", window.opener);
// }, 100)

</script>
</html>
