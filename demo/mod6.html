<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Demo</title>
<script src="../src/message.js"></script>

<link rel="stylesheet" href="http://view.gitlab.pro/common-ui/css-layout/raw/master/demo/css/base.css">
<link rel="stylesheet" href="http://view.gitlab.pro/common-ui/css-layout/raw/master/demo/css/layout.css">
<link rel="stylesheet" href="http://view.gitlab.pro/common-ui/ui/raw/master/src/ui.css">
<link rel="stylesheet" href="css/demo.css">
</head>
<body>

<div class="mod mod-out">
    <div class="mod_hd s-phm">iframe.mod6.test</div>
    <div class="mod_bd s-pam">
        <p class="s-mbs">from: <span id="from" class="gray"></span></p>
        <form id="mod6" action="/">
            <div class="btn l-fr s-pls">
                <button class="ui-btn" hidefocus="true">send</button>
            </div>
            <div class="l-ff input">
                <b><input value="mod6.iframe.test" /></b>
            </div>
        </form>
        <pre class="result s-mtm s-pam">
            <span>wait...</span>
        </pre>
    </div>
</div>

</body>
<script>
var message = typeof require === "function"
? require('../src/message.js')
: Hao123.message;

message.on("iframe.mod5.test", function(data) {
    document.getElementById("mod6").parentNode.getElementsByTagName("pre")[0].innerHTML = data;
});

message.on("iframe.mod7.test", function(data) {
    document.getElementById("mod6").parentNode.getElementsByTagName("pre")[0].innerHTML = data;
});

document.getElementById("mod6").onsubmit = function() {
    message
        .send("iframe.mod6.test", this.getElementsByTagName("input")[0].value, window.parent.frames[1])
        .send("iframe.mod6.test", this.getElementsByTagName("input")[0].value, window.parent.frames[3]);
    return false;
}

document.getElementById("from").innerHTML = location.href;
</script>
</html>
